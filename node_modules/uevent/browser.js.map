{"version":3,"file":"browser.js","sources":["src/Event.js","src/EventEmitter.js","index.js"],"sourcesContent":["const returnTrue = () => {\n    return true;\n};\n\nconst returnFalse = () => {\n    return false;\n};\n\nclass Event {\n\n    /**\n     * @param {*} target\n     * @param {String} type\n     * @param {Array} args\n     */\n    constructor(target, type, args) {\n        Object.defineProperties(this, {\n            'target': {\n                get       : () => {\n                    return target;\n                },\n                set       : () => {},\n                enumerable: true\n            },\n            'type'  : {\n                get       : () => {\n                    return type;\n                },\n                set       : () => {},\n                enumerable: true\n            },\n            'args'  : {\n                get       : () => {\n                    return args;\n                },\n                set       : () => {},\n                enumerable: true\n            }\n        });\n\n        this.isDefaultPrevented = returnFalse;\n        this.isPropagationStopped = returnFalse;\n    }\n\n    preventDefault() {\n        this.isDefaultPrevented = returnTrue;\n    }\n\n    stopPropagation() {\n        this.isPropagationStopped = returnTrue;\n    }\n\n}\n\nmodule.exports = Event;\n","const Event = require('./Event');\n\n/**\n * @typedef {Object.<String, Function>} Callbacks\n */\n\nclass EventEmitter {\n\n    /**\n     * Add one or many event handlers\n     *\n     * @example\n     *  obj.on('event', callback)\n     *  obj.on('event', listener) // listener has an `handleEvent` method\n     *  obj.on('event1 event2', callback)\n     *  obj.on({ event1: callback1, event2: callback2 })\n     *\n     * @param {String|Callbacks} events\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    on(events, callback) {\n        this.__events = this.__events || {};\n\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event)) {\n                    this.__events[event] = this.__events[event] || [];\n                    this.__events[event].push(events[event]);\n                }\n            }\n        }\n        else {\n            events.split(' ').forEach((event) => {\n                this.__events[event] = this.__events[event] || [];\n                this.__events[event].push(callback);\n            });\n        }\n\n        return this;\n    }\n\n    /**\n     * Remove one or many or all event handlers\n     *\n     * @example\n     *  obj.off('event')\n     *  obj.off('event', callback)\n     *  obj.off('event1 event2')\n     *  obj.off({ event1: callback1, event2: callback2 })\n     *  obj.off()\n     *\n     * @param {String|Callbacks} [events]\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    off(events, callback) {\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event)) {\n                    if (this.__events && (event in this.__events)) {\n                        const index = this.__events[event].indexOf(events[event]);\n                        if (index !== -1) this.__events[event].splice(index, 1);\n                    }\n                    if (this.__once && (event in this.__once)) {\n                        const index = this.__once[event].indexOf(events[event]);\n                        if (index !== -1) this.__once[event].splice(index, 1);\n                    }\n                }\n            }\n        }\n        else if (!!events) {\n            events.split(' ').forEach((event) => {\n                if (this.__events && (event in this.__events)) {\n                    if (callback) {\n                        const index = this.__events[event].indexOf(callback);\n                        if (index !== -1) this.__events[event].splice(index, 1);\n                    }\n                    else {\n                        this.__events[event].length = 0;\n                    }\n                }\n                if (this.__once && (event in this.__once)) {\n                    if (callback) {\n                        const index = this.__once[event].indexOf(callback);\n                        if (index !== -1) this.__once[event].splice(index, 1);\n                    }\n                    else {\n                        this.__once[event].length = 0;\n                    }\n                }\n            });\n        }\n        else {\n            this.__events = {};\n            this.__once = {};\n        }\n\n        return this;\n    }\n\n    /**\n     * Add one or many event handlers that will be called only once\n     * This handlers are only applicable to \"trigger\", not \"change\"\n     *\n     * @example\n     *  obj.once('event', callback)\n     *  obj.once('event1 event2', callback)\n     *  obj.once({ event1: callback1, event2: callback2 })\n     *\n     * @param {String|Callbacks} events\n     * @param {Function} [callback]\n     * @return {this}\n     */\n    once(events, callback) {\n        this.__once = this.__once || {};\n\n        if (typeof events === 'object') {\n            for (const event in events) {\n                if (events.hasOwnProperty(event)) {\n                    this.__once[event] = this.__once[event] || [];\n                    this.__once[event].push(events[event]);\n                }\n            }\n        }\n        else {\n            events.split(' ').forEach((event) => {\n                this.__once[event] = this.__once[event] || [];\n                this.__once[event].push(callback);\n            });\n        }\n\n        return this;\n    }\n\n    /**\n     * Trigger all handlers for an event\n     *\n     * @param {String} event\n     * @param {*...} [arguments]\n     * @return {Event}\n     */\n    trigger(event /* , args... */) {\n        const args = Array.prototype.slice.call(arguments, 1);\n        const e = new Event(this, event, args);\n\n        if (this.__events && (event in this.__events)) {\n            for (let i = 0, l = this.__events[event].length; i < l; i++) {\n                const f = this.__events[event][i];\n                if (typeof f === 'object') {\n                    f.handleEvent(e);\n                }\n                else {\n                    f.call(this, e, ...args);\n                }\n                if (e.isPropagationStopped()) {\n                    break;\n                }\n            }\n        }\n\n        if (this.__once && (event in this.__once)) {\n            for (let i = 0, l = this.__once[event].length; i < l; i++) {\n                const f = this.__once[event][i];\n                if (typeof f === 'object') {\n                    f.handleEvent(e);\n                }\n                else {\n                    f.call(this, e, ...args);\n                }\n                if (e.isPropagationStopped()) {\n                    break;\n                }\n            }\n            delete this.__once[event];\n        }\n\n        return e;\n    }\n\n    /**\n     * Trigger all modificators for an event, each handler must return a value\n     *\n     * @param {String} event\n     * @param {*} value\n     * @param {*...} [arguments]\n     * @return {*} modified value\n     */\n    change(event, value /* , args... */) {\n        const args = Array.prototype.slice.call(arguments, 2);\n        const e = new Event(this, event, args);\n        e.value = value;\n\n        if (this.__events && event in this.__events) {\n            for (let i = 0, l = this.__events[event].length; i < l; i++) {\n                const f = this.__events[event][i];\n                if (typeof f === 'object') {\n                    e.value = f.handleEvent(e);\n                }\n                else {\n                    e.value = f.call(this, e, e.value, ...args);\n                }\n                if (e.isPropagationStopped()) {\n                    break;\n                }\n            }\n        }\n\n        return e.value;\n    }\n\n}\n\nmodule.exports = EventEmitter;\n","const EventEmitter = require('./src/EventEmitter');\nconst Event = require('./src/Event');\n\nfunction mixin(target) {\n    target = typeof target === 'function' ? target.prototype : target;\n\n    ['on', 'off', 'once', 'trigger', 'change'].forEach((name) => {\n        target[name] = EventEmitter.prototype[name];\n    });\n\n    return target;\n}\n\nmodule.exports = {\n    EventEmitter: EventEmitter,\n    Event       : Event,\n    mixin       : mixin,\n};\n"],"names":["returnTrue","returnFalse","Event","target","type","args","Object","defineProperties","get","set","enumerable","isDefaultPrevented","isPropagationStopped","preventDefault","stopPropagation","EventEmitter","on","events","callback","__events","event","hasOwnProperty","push","split","forEach","off","index","indexOf","splice","__once","length","once","trigger","Array","prototype","slice","call","arguments","e","i","l","f","handleEvent","change","value","mixin","name"],"mappings":"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"}